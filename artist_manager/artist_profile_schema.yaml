# Artist Profile Schema for AI Artist Creation and Management System
# This schema defines the structure and validation rules for artist profiles

# Top-level artist profile schema
artist_profile:
  type: object
  required:
    - artist_id
    - stage_name
    - genre
    - subgenres
    - style_description
    - voice_type
    - personality_traits
    - target_audience
    - visual_identity_prompt
    - settings
  properties:
    # Core identity fields
    artist_id:
      type: string
      description: Unique identifier for the artist
      pattern: "^[a-zA-Z0-9_-]+$"
    
    stage_name:
      type: string
      description: Artist's stage name
      minLength: 1
      maxLength: 100
    
    real_name:
      type: string
      description: Artist's real name (if applicable)
      nullable: true
    
    # Musical style fields
    genre:
      type: string
      description: Primary genre of the artist
      minLength: 1
      maxLength: 50
    
    subgenres:
      type: array
      description: List of subgenres that influence the artist's style
      minItems: 1
      items:
        type: string
    
    style_description:
      type: string
      description: Detailed description of the artist's musical style
      minLength: 10
    
    voice_type:
      type: string
      description: Description of the artist's vocal characteristics
      minLength: 5
    
    # Personality and audience fields
    personality_traits:
      type: array
      description: List of personality traits that define the artist
      minItems: 1
      items:
        type: string
    
    target_audience:
      type: string
      description: Description of the target audience for the artist
      minLength: 10
    
    # Visual and content generation fields
    visual_identity_prompt:
      type: string
      description: Prompt for generating the artist's visual identity
      minLength: 10
    
    song_prompt_generator:
      type: string
      description: Template or method used for generating song prompts
      default: ""
    
    video_prompt_generator:
      type: string
      description: Template or method used for generating video prompts
      default: ""
    
    # Background and influences
    backstory:
      type: string
      description: The artist's fictional backstory and history
      default: ""
    
    influences:
      type: array
      description: Artists or genres that influence this artist's style
      default: []
      items:
        type: string
    
    # Metadata fields
    creation_date:
      type: string
      description: Date when the artist profile was created
      format: date-time
    
    update_history:
      type: array
      description: History of updates made to the artist profile
      default: []
      items:
        $ref: "#/update_history_item"
    
    notes:
      type: string
      description: Additional notes about the artist
      nullable: true
    
    # Settings and configuration
    settings:
      $ref: "#/artist_profile_settings"
    
    # Database integration fields
    is_active:
      type: boolean
      description: Whether the artist is currently active
      default: true
    
    last_content_date:
      type: string
      description: Date when content was last generated for this artist
      format: date
      nullable: true
    
    performance_rating:
      type: number
      description: Overall performance rating of the artist
      minimum: 0
      maximum: 10
      nullable: true
    
    # Content planning fields
    current_content_plan_id:
      type: string
      description: ID of the current content plan for this artist
      nullable: true
    
    content_plan_end_date:
      type: string
      description: End date of the current content plan
      format: date
      nullable: true
    
    # Additional fields for backward compatibility
    source_prompt:
      type: string
      description: Original prompt used to generate the artist
      nullable: true
    
    session_id:
      type: string
      description: Session ID from the creation process
      nullable: true
    
    metadata:
      type: object
      description: Additional metadata for the artist
      default: {}

# Update history item schema
update_history_item:
  type: object
  required:
    - update_date
    - updated_fields
  properties:
    update_date:
      type: string
      description: Date when the update was made
      format: date
    
    updated_fields:
      type: array
      description: List of fields that were updated
      items:
        type: string
    
    update_reason:
      type: string
      description: Reason for the update
      nullable: true
    
    update_source:
      type: string
      description: Source of the update (user, system, etc.)
      nullable: true

# Artist profile settings schema
artist_profile_settings:
  type: object
  required:
    - release_strategy
    - llm_assignments
    - training_data_version
  properties:
    release_strategy:
      $ref: "#/release_strategy"
    
    llm_assignments:
      $ref: "#/llm_assignments"
    
    training_data_version:
      type: string
      description: Version of training data used for this artist
    
    trend_alignment_behavior:
      type: string
      description: How closely to follow trends
      enum: ["strict", "soft", "experimental"]
      default: "soft"
    
    behavior_evolution_settings:
      $ref: "#/behavior_evolution_settings"
    
    social_media_presence:
      $ref: "#/social_media_presence"
    
    performance_metrics_tracking:
      type: boolean
      description: Whether to track performance metrics for this artist
      default: true

# Release strategy schema
release_strategy:
  type: object
  required:
    - track_release_random_days
    - video_release_ratio
  properties:
    track_release_random_days:
      type: array
      description: Min and max days between track releases
      minItems: 2
      maxItems: 2
      items:
        type: integer
        minimum: 1
    
    video_release_ratio:
      type: number
      description: Probability of creating a video for a track
      minimum: 0
      maximum: 1
      default: 0.7
    
    content_plan_length_days:
      type: integer
      description: Length of content plan in days
      minimum: 1
      default: 90
    
    social_media_post_frequency:
      type: integer
      description: Number of social media posts per week
      minimum: 0
      default: 3

# LLM assignments schema
llm_assignments:
  type: object
  required:
    - artist_prompt_llm
    - song_prompt_llm
    - video_prompt_llm
    - final_validator_llm
  properties:
    artist_prompt_llm:
      type: string
      description: LLM used for artist prompt generation
    
    song_prompt_llm:
      type: string
      description: LLM used for song prompt generation
    
    video_prompt_llm:
      type: string
      description: LLM used for video prompt generation
    
    final_validator_llm:
      type: string
      description: LLM used for final validation

# Behavior evolution settings schema
behavior_evolution_settings:
  type: object
  properties:
    allow_minor_genre_shifts:
      type: boolean
      description: Whether to allow minor shifts in genre over time
      default: true
    
    allow_personality_shifts:
      type: boolean
      description: Whether to allow personality traits to evolve over time
      default: true
    
    safe_mode:
      type: boolean
      description: Whether to restrict evolution to safe parameters
      default: true
    
    evolution_speed:
      type: string
      description: How quickly the artist evolves
      enum: ["slow", "medium", "fast"]
      default: "medium"
    
    preserve_core_identity:
      type: boolean
      description: Whether to maintain core identity elements during evolution
      default: true

# Social media presence schema
social_media_presence:
  type: object
  properties:
    platforms:
      type: array
      description: Social media platforms where the artist is present
      default: ["instagram", "tiktok", "twitter"]
      items:
        type: string
    
    posting_style:
      type: string
      description: Style of social media posts
      enum: ["casual", "professional", "mysterious"]
      default: "casual"
    
    engagement_strategy:
      type: string
      description: How actively the artist engages
      enum: ["passive", "moderate", "active"]
      default: "moderate"
